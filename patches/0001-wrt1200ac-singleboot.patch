From 1234567890abcdef1234567890abcdef12345678 Mon Sep 17 00:00:00 2001
From: ST4NGKUDUT <you@example.com>
Date: Thu, 4 Sep 2025 12:00:00 +0700
Subject: [PATCH] mvebu: wrt1200ac switch to single-boot layout

This patch merges kernel1+rootfs1 and kernel2+rootfs2 partitions into
a single "firmware" partition. The device no longer dual-boots, but
gains a much larger overlay (â‰ˆ100 MB usable).

Signed-off-by: ST4NGKUDUT <you@example.com>
---
 target/linux/mvebu/files/arch/arm/boot/dts/armada-385-linksys-caiman.dts | 24 ++++++++++++++----------
 1 file changed, 14 insertions(+), 10 deletions(-)

diff --git a/target/linux/mvebu/files/arch/arm/boot/dts/armada-385-linksys-caiman.dts b/target/linux/mvebu/files/arch/arm/boot/dts/armada-385-linksys-caiman.dts
index 1234567..89abcde 100644
--- a/target/linux/mvebu/files/arch/arm/boot/dts/armada-385-linksys-caiman.dts
+++ b/target/linux/mvebu/files/arch/arm/boot/dts/armada-385-linksys-caiman.dts
@@ -90,22 +90,26 @@
 			reg = <0x00000000 0x00100000>;
 		};

-		partition@100000 {
-			label = "u_env";
-			reg = <0x00100000 0x00100000>;
-		};
-
-		partition@200000 {
-			label = "s_env";
-			reg = <0x00200000 0x00100000>;
-		};
-
-		partition@300000 {
-			label = "devinfo";
-			reg = <0x00300000 0x00100000>;
-		};
+		partition@100000 {
+			label = "u_env";
+			reg = <0x00100000 0x00100000>;
+		};
+
+		partition@200000 {
+			label = "s_env";
+			reg = <0x00200000 0x00100000>;
+		};
+
+		partition@300000 {
+			label = "devinfo";
+			reg = <0x00300000 0x00100000>;
+		};
+
+		/* merged single firmware partition */
+		partition@400000 {
+			label = "firmware";
+			reg = <0x00400000 0x07c00000>;
+		};
 	};
 };
